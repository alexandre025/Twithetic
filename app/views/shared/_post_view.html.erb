<div id="post_<%= post.id %>" class="single-post-view infinite-scroll-item <%= 'with-image' if post.image %>" data-hook="single-post-view">

  <% if post.image %>
      <a href="<%= post_path(post) %>">
        <div class="image-layout">
          <%= image_tag post.image.attachment.url(), class: 'post-image' %>
        </div>
      </a>
  <% end %>

  <%= image_tag post.user.image.attachment.url(:bigger_thumb), class: 'post-user-image' %>

  <div class="right">
    <div class="post-infos">
      <span class="post-user"><%= "#{post.user.firstname} #{post.user.lastname}" %></span>
      <span class="post-username"><%= link_to "@#{post.user.username}", user_path(post.user) %></span>
      <span class="post-created_at"><%= post.created_at.strftime('%d/%m/%Y') %></span>
      <% if post.parent %>
        <div class="post-retweeted"><%= t 'posts.retweeted_from' %> <%= link_to "@#{post.parent.user.username}", user_path(post.parent.user) %></div>
      <% end %>
      <%= content_tag :div, post.message.html_safe, class: 'post-message' %>
    </div>
  </div>



  <% if user_signed_in? %>
      <div data-hook="post-like">
        <%= form_tag post_like_path(post_id: post.id), remote: true do %>
            <%= submit_tag t('posts.actions.like'), class: ('liked' if current_user.following?(post)) %>
        <% end %>
      </div>
  <% end %>

  <%= render partial: 'shared/retweet_action', locals: {post: post} %>

  <%= render partial: 'shared/comment_form', locals: {post: post} if controller_name == 'posts' and action_name == 'show' %>

</div>